{% extends "base.html" %}

{% block title %}Articoli Ordine · IppolitoPisaniApp{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/articoli_ordine.css') }}" />
{% endblock %}

{# Rimuove header e footer blu per questa pagina #}
{% block header %}{% endblock %}
{% block footer %}{% endblock %}

{% block content %}
  <section class="articles-section container">
    <header class="articles-header">
      <div class="header-content">
        <a href="{{ url_for('main.vista_ordini', rifconto=rifconto) }}" class="back-link">
          <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
          </svg>
          Torna agli Ordini
        </a>
        <h1>Articoli Ordine N° {{ numdoc_formatted }}</h1>
        <p class="client-info">Cliente: <strong>{{ cliente_nome }}</strong></p>
      </div>
    </header>

    <div class="articles-grid">
      {% if articoli %}
        {% for articolo in articoli %}
          <div class="article-card">
            <div class="article-header">
              <h3 class="article-title">
                <svg class="icon" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                  <path d="M2.5 1A1.5 1.5 0 0 0 1 2.5v11A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-11A1.5 1.5 0 0 0 13.5 1h-11zM2 2.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11z"/>
                  <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
                </svg>
                Pratica: {{ articolo.pratica_numero if articolo.pratica_numero else 'N/A' }}
              </h3>
              <span class="article-date">
                <svg class="icon" width="14" height="14" fill="currentColor" viewBox="0 0 16 16">
                  <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
                </svg>
                {% if articolo.datdoc %}
                  {{ articolo.datdoc.strftime('%d/%m/%Y') if articolo.datdoc is not string else articolo.datdoc }}
                {% else %}
                  Data non disponibile
                {% endif %}
              </span>
            </div>
            
            <div class="article-details">
              <div class="detail-row article-description">
                <span class="detail-label">Descrizione:</span>
                <span class="detail-value">{{ articolo.desart if articolo.desart else 'N/A' }}</span>
              </div>
              
              <div class="detail-row article-code">
                <span class="detail-label">Codice:</span>
                <span class="detail-value code">{{ articolo.codart if articolo.codart else 'N/A' }}</span>
              </div>
            </div>
          </div>
        {% endfor %}
      {% else %}
        <div class="empty-state">
          <svg class="empty-icon" width="64" height="64" fill="currentColor" viewBox="0 0 16 16">
            <path d="M2 2.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5H2zM3 3H2v1h1V3z"/>
            <path d="M5 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM5.5 7a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9zm0 4a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9z"/>
            <path fill-rule="evenodd" d="M1.5 7a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5V7zM2 7h1v1H2V7zm0 3.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5H2zm1 .5H2v1h1v-1z"/>
          </svg>
          <p>Nessun articolo trovato per questo ordine.</p>
        </div>
      {% endif %}
    </div>

    <footer class="articles-footer">
      <small>Trovati {{ articoli|length if articoli else 0 }} articoli per l'ordine N° {{ numdoc_formatted }}</small>
    </footer>
  </section>
{% endblock %}
