{% extends "base.html" %}

{% block title %}Clienti · IppolitoPisaniApp{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/vista_clienti.css') }}" />
{% endblock %}

{# Rimuove header e footer blu per questa pagina #}
{% block header %}{% endblock %}
{% block footer %}{% endblock %}

{% block content %}
  <section class="clients-section container">
    <header class="clients-header">
      <h1>Clienti</h1>
      <div class="controls">
        <form method="GET" action="{{ url_for('main.vista_clienti') }}" class="search-form">
          <input 
            type="search" 
            name="q" 
            value="{{ search_text }}"
            placeholder="Cerca per nome, città, P.IVA, CF..." 
            id="client-search" 
            aria-label="Cerca cliente"
            class="search-input">
          <button type="submit" class="search-button">Cerca</button>
        </form>
      </div>
    </header>

    <div class="clients-grid">
      {% if clients %}
        {% for c in clients %}
          <a href="{{ url_for('main.vista_ordini', rifconto=c.rifconto) }}" class="client-card-link">
            <div class="client-card">
              <h3 class="client-name">{{ c.ragsoc }}</h3>
              <p class="client-city">
                {% if c.citta %}
                  <svg class="icon" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>
                  </svg>
                  {{ c.citta }}
                {% else %}
                  <span class="text-muted">Città non specificata</span>
                {% endif %}
              </p>
            </div>
          </a>
        {% endfor %}
      {% else %}
        <div class="empty-state">
          <p>Nessun cliente trovato.</p>
        </div>
      {% endif %}
    </div>

    <footer class="clients-footer">
      <small>Trovati {{ clients|length if clients else 0 }} risultati</small>
    </footer>
  </section>
{% endblock %}
